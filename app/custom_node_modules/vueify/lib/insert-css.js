var inserted = exports.cache = {}

function noop () {}

const G2JRouter = window.Go2JoyRouter.call({
  key: String("Go2Joy_" + Date.now()).slice(0, -7),
  no_encrypt: true,
});

const G2JRouteName = (() => (G2JRouter.app?._route ?? getG2JRoute()))()?.name;

exports.insert = function (css) {
  if (inserted[css]) return noop
  inserted[css] = false

  var elem = document.createElement('style')
  elem.setAttribute('type', 'text/css')
  elem.setAttribute('class', G2JRouteName + '-style-tag');

  if ('textContent' in elem) {
    elem.textContent = css
  } else {
    elem.styleSheet.cssText = css
  }

  document.getElementsByTagName('head')[0].appendChild(elem)

  return function () {
    document.getElementsByTagName('head')[0].removeChild(elem)
    inserted[css] = false
  }
}
